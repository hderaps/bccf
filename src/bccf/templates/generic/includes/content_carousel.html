{% load static mezzanine_tags %}

{% if slides %}
<section id="{{ carousel_name }}" class="section content-pages {{ carousel_color }}">
    <div class="section row top-control-container">
        <div class="col five carousel-title-container">
            <h2>{{ carousel_title|title }}</h2>
        </div>
        <div id="filter-container" class="col four">
            {% if filter %}
            <form>
                <input type="text" name="filter" placeholder="Filter" class="filter" />
            </form>
            {% endif %}
            &nbsp;
        </div>
        <div class="col three no-mobile control-buttons">
            <a href="#" class="show-type-control to-grid">Grid</a>
            <a href="#" class="show-type-control to-slide">Slide</a>
        </div>
    </div>
    <div id="{{ carousel_name }}-inner">
        <a class="button-prev-lgrey col one button-prev no-mobile no-tablet"></a>
        {% include 'generic/content_slides.html' %}
        <a class="button-next-lgreen col one button-next no-mobile no-tablet"></a>
    </div>
</section>

{% if filter %}
<script type="text/javascript" >
$('.filter').on('keyup', function() {
    var parent = $(this).parents('.content-pages');
    $.ajax({
        url: '/filter/'+$(this).val(),
        success: function(data) {
            json = $.parseJSON(data);
            // Delete all the slides
            // count = 
            add_slide(json, parent);
            add_grid(json, parent);
            parent.find('.to-grid').trigger('click');
        },
    });
});
</script>
{% endif %}

{% endif %}